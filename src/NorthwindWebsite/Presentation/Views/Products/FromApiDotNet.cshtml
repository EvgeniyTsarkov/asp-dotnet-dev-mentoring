@using NorthwindWebsite.Entities
@using System.Net

<link rel="stylesheet" href="~/css/entities-from-api.css" />

@{
    const string requestUrl = "https://localhost:7087/api/products";

    var client = new HttpClient();

    var httpRequest = new HttpRequestMessage(HttpMethod.Get, new Uri(requestUrl))
            {
                Version = HttpVersion.Version10
            };

    var productsList = new List<Product>();

    var response = await client.SendAsync(httpRequest);
    if (response.IsSuccessStatusCode)
    {
        productsList = await response.Content.ReadFromJsonAsync<List<Product>>();
    }
}

<h1>Products from API with .Net Client</h1>

<ul>
    @foreach (var product in productsList)
    {
        <li class="list-item">@product.ProductName</li>
    }
</ul>